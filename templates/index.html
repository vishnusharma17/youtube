<!DOCTYPE html>
<html>
<head>
  <title>YouTube Shorts & Reel Downloader</title>
  <style>
    body { font-family: Poppins, sans-serif; text-align: center; padding: 20px; }
    input { width: 80%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; margin-top: 10px; }
    button { padding: 12px 22px; border-radius: 8px; border: none; cursor: pointer; margin-top: 15px; }
    #preview { margin-top: 20px; }
    iframe { width: 90%; height: 400px; border-radius: 12px; }
  </style>
</head>
<body>

  <h2>YouTube Shorts / Instagram Reels Downloader</h2>

  <form onsubmit="event.preventDefault(); previewVideo();">
    <input type="text" id="videoURL" placeholder="Paste Reel/Shorts URL here..." required />
    <br>
    <button type="submit">Preview Video</button>
  </form>

  <div id="preview"></div>
  <button id="downloadBtn" style="display:none;" onclick="downloadVideo()">Download Now</button>

<script>
  function previewVideo(){
    const url = document.getElementById("videoURL").value.trim();
    if(url.includes("youtube.com/shorts")){
      const id = url.split("shorts/")[1].split("?")[0];
      document.getElementById("preview").innerHTML = `<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
    } else if(url.includes("instagram.com")){
      document.getElementById("preview").innerHTML = `<video controls style="width:90%;border-radius:12px;"><source src="${url}" type="video/mp4"></video>`;
    }
    document.getElementById("downloadBtn").style.display="block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="none";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";
    document.getElementById("downloadBtn").style.display="inline-block";

    document.getElementById("downloadBtn").style.display="inline-block";
  }

  async function downloadVideo(){
    const url = document.getElementById("videoURL").value.trim();
    const res = await fetch("/api/download?url=" + encodeURIComponent(url));
    const blob = await res.blob();
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "video.mp4";
    a.click();
  }
</script>

</body>
</html>
